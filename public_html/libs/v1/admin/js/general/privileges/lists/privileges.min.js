var pag=1,limit=20;function loadPrivileges(){if(document.querySelector("#dir_site")){var e=document.querySelector("#dir_site"),t="";null!==e.value&&""!==e.value&&(t="/"+e.value)}$("#list").html(""),$("#pagination").html("");var n="",i=document.getElementById("name").value;if(""!==i)n="&description="+i;var l="",a=document.getElementById("ord"),o=a.options[a.selectedIndex].value;null!==o&&""!==o&&(l="&ord="+o);var r="pag="+pag+"&limit="+limit+n+l;$.post(t+"/privileges/search/lists",r,(function(e){$("#list").html(e)})),$.post(t+"/privileges/search/pagination",r,(function(e){$("#pagination").html(e)}))}function loadBtnPrivileges(){loadPrivileges(),document.getElementById("btn-clean-filter").style.display="inline-block",$("#search-modal").modal("hide")}function pagination(e){if(document.querySelector("#dir_site")){var t=document.querySelector("#dir_site"),n="";null!==t.value&&""!==t.value&&(n="/"+t.value)}var i="",l=document.getElementById("name").value;if(""!==l)i="&description="+l;var a="",o=document.getElementById("ord"),r=o.options[o.selectedIndex].value;null!==r&&""!==r&&(a="&ord="+r);var c="pag="+e+"&limit="+limit+i+a;$.post(n+"/privileges/search/lists",c,(function(e){$("#list").html(e)})),$.post(n+"/privileges/search/pagination",c,(function(e){$("#pagination").html(e)}))}function cleanSearch(){document.getElementById("name").value="",select_box=document.getElementById("ord"),select_box.selectedIndex=3,loadPrivileges(),document.getElementById("btn-clean-filter").style.display="none",$("#search-modal").modal("hide")}function cleanForm(e){cancelValidationForm(e);document.getElementById(e.id).reset()}function createPrivilege(e){if(document.querySelector("#dir_site")){var t=document.querySelector("#dir_site"),n="";null!==t.value&&""!==t.value&&(n="/"+t.value)}if(validationForm(e)){const t=swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3});var i=$("#"+e.id).serialize();$.post(n+"/privileges/controller/save",i,(function(n){var i=n.split("->");"1"===i[0]?(t.fire({icon:"success",title:" "+i[1]}),$(".addPrivilege").modal("hide"),loadPrivileges(),cleanForm(e)):"2"===i[0]&&t.fire({icon:"warning",title:" "+i[1]})}))}}$(document).ready((function(){loadPrivileges()}));const btnCreate=document.getElementById("btn-privilege"),btnCleanForm=document.getElementById("btn-cleanForm"),btnCleanSearch=document.getElementById("btn-cleanSearch"),btnLoadSearch=document.getElementById("btn-loadSearch");btnCreate.addEventListener("click",(function(){createPrivilege(form_privilege)})),btnCleanForm.addEventListener("click",(function(){cleanForm(form_privilege)})),btnCleanSearch.addEventListener("click",(function(){cleanSearch()})),btnLoadSearch.addEventListener("click",(function(){loadBtnPrivileges()}));