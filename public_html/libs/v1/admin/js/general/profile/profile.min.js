function update(e){if(document.querySelector("#dir_site")){var t=document.querySelector("#dir_site"),l="";null!==t.value&&""!==t.value&&(l="/"+t.value)}if(validationForm(e)&&!0===emailSearchProfile(e.email)&&!0===cpfSearchProfile(e.cpf)){const t=swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3});var n=$("#"+e.id).serialize();$.post(l+"/profile/save",n,(function(e){var l=e.trim().split("->");"1"===l[0]?t.fire({icon:"success",title:" "+l[1]}):"2"===l[0]&&t.fire({icon:"warning",title:" "+l[1]})}))}}function emailSearchProfile(e){var t=!0;if(emailValidation(e)){if(document.querySelector("#dir_site")){var l=document.querySelector("#dir_site"),n="";null!==l.value&&""!==l.value&&(n="/"+l.value)}$.post(n+"/profile/getemail","email="+e.value,(function(l){"1"===l?(e.classList.add("is-invalid"),document.getElementById("to_validation_already_registered_email").style.display="block",document.getElementById("to_validation_blank_email").style.display="none",t=!1):(e.classList.remove("is-invalid"),document.getElementById("to_validation_already_registered_email").style.display="none",document.getElementById("to_validation_blank_email").style.display="none",t=!0)}))}else document.getElementById("to_validation_already_registered_email").style.display="none";return t}function cpfSearchProfile(e){var t=!0;if(cpfValidate(e)){if(document.querySelector("#dir_site")){var l=document.querySelector("#dir_site"),n="";null!==l.value&&""!==l.value&&(n="/"+l.value)}var a="cpf="+e.value;$.post(n+"/profile/getcpf",a,(function(l){"1"===l?(e.classList.add("is-invalid"),document.getElementById("to_validation_already_registered_cpf").style.display="block",document.getElementById("to_validation_blank_cpf").style.display="none",t=!1):(e.classList.remove("is-invalid"),document.getElementById("to_validation_already_registered_cpf").style.display="none",document.getElementById("to_validation_blank_cpf").style.display="none",t=!0)}))}else document.getElementById("to_validation_already_registered_cpf").style.display="none";return t}function profilePhotoSave(){if(document.querySelector("#dir_site")){var e=document.querySelector("#dir_site"),t="";null!==e.value&&""!==e.value&&(t="/"+e.value)}const l=swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3});var n=document.getElementById("form_photo_profile"),a=new FormData(n);$.ajax({url:t+"/profile/photo",type:"POST",enctype:"multipart/form-data",data:a,processData:!1,contentType:!1,success:function(e){var t=e.split("->");"1"===t[0]?(l.fire({icon:"success",title:" "+t[1]}),document.location.reload(!0)):"1"!==t[0]&&l.fire({icon:"warning",title:" "+t[1]})}})}function readURL(e){if(e.files&&e.files[0]){var t=new FileReader;t.onload=function(e){document.getElementById("div_modal_profile_img").style.display="block",document.getElementById("div_modal_profile_i_div").style.display="none",$("#div_modal_profile_img").attr("src",e.target.result)},t.readAsDataURL(e.files[0])}}function uploadPhoto(){$("#profile_photo").trigger("click")}function cleanFormPhoto(){document.getElementById("div_modal_profile_img").style.display="none",document.getElementById("div_modal_profile_i_div").style.display="block",$("#div_modal_profile_img").attr("src",""),$("#profile_photo").attr("value","")}function passVerify(){var e=document.getElementById("passNew").value,t=document.getElementById("passConfirm").value,l=!1;if(null!==e&&""!==e){if(null!==e&&""!==e&&null!==t&&""!==t)e.length<8?(document.getElementById("to_validation_blank_passNew").style.display="none",document.getElementById("to_validation_passNewQuantity").style.display="block",document.getElementById("to_validation_passNewComplexifyAlphaNumber").style.display="none",document.getElementById("passNew").value="",document.getElementById("passConfirm").value="",$("#passNew").focus(),l=!1):/(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[@-_.$%]).{8,}/.test(document.getElementById("passNew").value)?(document.getElementById("to_validation_passNewQuantity").style.display="none",document.getElementById("to_validation_passNewComplexifyAlphaNumber").style.display="none",l=passConfirm()):(document.getElementById("to_validation_passNewComplexifyAlphaNumber").style.display="block",document.getElementById("to_validation_passNewQuantity").style.display="none",document.getElementById("passNew").value="",document.getElementById("passConfirm").value="",$("#passNew").focus(),l=!1);else if(null!==e&&""!==e){if(e.length<8)document.getElementById("to_validation_blank_passNew").style.display="none",document.getElementById("to_validation_passNewQuantity").style.display="block",document.getElementById("to_validation_passNewComplexifyAlphaNumber").style.display="none",document.getElementById("passNew").value="",document.getElementById("passConfirm").value="",$("#passNew").focus(),l=!1;else/(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[@-_.$%]).{8,}/.test(document.getElementById("passNew").value)?(document.getElementById("to_validation_passNewQuantity").style.display="none",document.getElementById("to_validation_passNewComplexifyAlphaNumber").style.display="none",l=passConfirm()):(document.getElementById("to_validation_passNewComplexifyAlphaNumber").style.display="block",document.getElementById("to_validation_passNewQuantity").style.display="none",document.getElementById("passNew").value="",document.getElementById("passConfirm").value="",$("#passNew").focus(),l=!1)}}else document.getElementById("to_validation_passNewComplexifyAlphaNumber").style.display="none",document.getElementById("to_validation_blank_passNew").style.display="block",l=!1;return l}function passConfirm(){var e=document.getElementById("passNew").value,t=document.getElementById("passConfirm").value,l=!1;return null!==e&&""!==e&&null!==t&&""!==t?e===t?(document.getElementById("to_validation_blank_passNew").style.display="none",document.getElementById("to_validation_passNewQuantity").style.display="none",document.getElementById("to_validation_passNewComplexifyAlphaNumber").style.display="none",document.getElementById("to_validation_blank_passConfirm").style.display="none",document.getElementById("to_validation_passConfirmNew").style.display="none",l=!0):(document.getElementById("to_validation_passConfirmNew").style.display="block",$("passConfirm").focus(),l=!1):null===e||""===e?(document.getElementById("to_validation_blank_passNew").style.display="block",document.getElementById("to_validation_passNewQuantity").style.display="none",document.getElementById("to_validation_passNewComplexifyAlphaNumber").style.display="none",document.getElementById("passNew").value="",document.getElementById("passConfirm").value="",$("#passNew").focus(),l=!1):(null===t&&""===t&&null!==e||""!==e)&&(document.getElementById("to_validation_blank_passConfirm").style.display="block",document.getElementById("to_validation_passConfirmNew").style.display="none",document.getElementById("passConfirm").value="",$("#passConfirm").focus(),l=!1),l}function passwSave(){if(document.querySelector("#dir_site")){var e=document.querySelector("#dir_site"),t="";null!==e.value&&""!==e.value&&(t="/"+e.value)}const l=swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3});if(!0===passVerify()){var n=document.getElementById("passCurrent");formhash(pass_profile,n,"passCurrentProfile");var a=document.getElementById("passNew");formhash(pass_profile,a,"passNewProfile");var o=document.getElementById("passConfirm");formhash(pass_profile,o,"passConfirmProfile");var i=$("#pass_profile").serialize();$.post(t+"/profile/updatepwd",i,(function(e){var t=e.split("->");"1"===t[0]?l.fire({icon:"success",title:" "+t[1]}):"2"===t[0]&&l.fire({icon:"warning",title:" "+t[1]})}))}}$(document).ready((function(){$(".data").datepicker();var e=document.getElementById("site_locale").value;Inputmask(masks[e]).mask(".data")})),$(document).ready((function(){$("#contact").inputmask("(99) 99999-9999",{placeholder:"(##) #####-####"}),cpfFormat(document.getElementById("cpf"))})),$(document).ready((function(){$("#profile_photo").on("change",(function(){readURL(this)}))}));